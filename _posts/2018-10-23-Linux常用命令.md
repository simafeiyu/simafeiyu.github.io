---
layout:     post
title:      Linux常用命令
subtitle:   
date:       2018-10-23
author:     simafeiyu
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Linux
    - 备忘
---

[TOC]

# 前言

> Linux命令繁多,好记性不如烂笔头,做下记录方便查阅

## **常用查看Linux系统信息命令**
* 系统
	1. uname -a               # 查看内核/操作系统/CPU信息
	2. head -n 1 /etc/issue   # 查看操作系统版本
	3. cat /proc/cpuinfo      # 查看CPU信息
	4. hostname               # 查看计算机名
	5. lspci -tv              # 列出所有PCI设备
	6. lsusb -tv              # 列出所有USB设备
	7. lsmod                  # 列出加载的内核模块
	8. env                    # 查看环境变量
	9. rpm -q centos-release    #centos查看系统版本

* 资源
	1. free -m                # 查看内存使用量和交换区使用量
	2. df -h                  # 查看各分区使用情况
	3. du -sh <目录名>        # 查看指定目录的大小
	4. grep MemTotal /proc/meminfo   # 查看内存总量
	5. grep MemFree /proc/meminfo    # 查看空闲内存量
	6. uptime                 # 查看系统运行时间、用户数、负载
	7. cat /proc/loadavg      # 查看系统负载
* 磁盘和分区
	1. mount | column -t      # 查看挂接的分区状态
	2. fdisk -l               # 查看所有分区
	3. swapon -s              # 查看所有交换分区
	4. hdparm -i /dev/hda     # 查看磁盘参数(仅适用于IDE设备)
	5. dmesg | grep IDE       # 查看启动时IDE设备检测状况
* 网络
	1. ifconfig               # 查看所有网络接口的属性
	2. iptables -L            # 查看防火墙设置
	3. route -n               # 查看路由表
	4. netstat -lntp          # 查看所有监听端口
	5. netstat -antp          # 查看所有已经建立的连接
	6. netstat -s             # 查看网络统计信息
* 进程
	1. ps -ef                 # 查看所有进程
	2. top                    # 实时显示进程状态
* 用户
	1. w                      # 查看活动用户
	2. id <用户名>            # 查看指定用户信息
	3. last                   # 查看用户登录日志
	4. cut -d: -f1 /etc/passwd   # 查看系统所有用户
	5. cut -d: -f1 /etc/group    # 查看系统所有组
	6. crontab -l             # 查看当前用户的计划任务
* 服务
	1. chkconfig --list       # 列出所有系统服务
	2. chkconfig --list | grep on    # 列出所有启动的系统服务
* 程序
	1. rpm -qa                # 查看所有安装的软件包

## **ls命令**

>  ls命令是linux下最常用的命令。ls命令就是list的缩写缺省下ls用来打印出当前目录的清单如果ls指定其他目录那么就会显示指定目录里的文件及文件夹清单。 通过ls 命令不仅可以查看linux文件夹包含的文件而且可以查看文件权限(包括目录、文件夹、文件权限)查看目录信息等等。ls 命令在日常的linux操作中用的很多!

1. 命令格式：
>	ls [选项] [目录名]

2. 命令功能：
> 列出目标目录中所有的子目录和文件。
 
3. 常用参数：
* -a, –all 列出目录下的所有文件，包括以 . 开头的隐含文件
* -A 同-a，但不列出“.”(表示当前目录)和“..”(表示当前目录的父目录)。
* -c  配合 -lt：根据 ctime 排序及显示 ctime (文件状态最后更改的时间)配合 -l：显示 ctime 但根据名称排序否则：根据 ctime 排序
* -C 每栏由上至下列出项目
* –color[=WHEN] 控制是否使用色彩分辨文件。WHEN 可以是'never'、'always'或'auto'其中之一
* -d, –directory 将目录象文件一样显示，而不是显示其下的文件。
* -D, –dired 产生适合 Emacs 的 dired 模式使用的结果*
* -f 对输出的文件不进行排序，-aU 选项生效，-lst 选项失效
* -g 类似 -l,但不列出所有者
* -G, –no-group 不列出任何有关组的信息
* -h, –human-readable 以容易理解的格式列出文件大小 (例如 1K 234M 2G)
* –si 类似 -h,但文件大小取 1000 的次方而不是 1024
* -H, –dereference-command-line 使用命令列中的符号链接指示的真正目的地
* –indicator-style=方式 指定在每个项目名称后加上指示符号<方式>：none (默认)，classify (-F)，file-type (-p)
* -i, –inode 印出每个文件的 inode 号
* -I, –ignore=样式 不印出任何符合 shell 万用字符<样式>的项目
* -k 即 –block-size=1K,以 k 字节的形式表示文件的大小。
* -l 除了文件名之外，还将文件的权限、所有者、文件大小等信息详细列出来。
* -L, –dereference 当显示符号链接的文件信息时，显示符号链接所指示的对象而并非符号链接本身的信息
* -m 所有项目以逗号分隔，并填满整行行宽
* -o 类似 -l,显示文件的除组信息外的详细信息。   
* -r, –reverse 依相反次序排列
*  -R, –recursive 同时列出所有子目录层
* -s, –size 以块大小为单位列出所有文件的大小
* -S 根据文件大小排序
* –sort=WORD 以下是可选用的 WORD 和它们代表的相应选项：
	extension -X status -c
	none -U time -t
	size -S atime -u
	time -t access -u
	version -v use -u
* -t 以文件修改时间排序
* -u 配合 -lt:显示访问时间而且依访问时间排序
	配合 -l:显示访问时间但根据名称排序
	否则：根据访问时间排序
* -U 不进行排序;依文件系统原有的次序列出项目
* -v 根据版本进行排序
* -w, –width=COLS 自行指定屏幕宽度而不使用目前的数值
* -x 逐行列出项目而不是逐栏列出
* -X 根据扩展名排序
* -1 每行只列出一个文件
* –help 显示此帮助信息并离开
* –version 显示版本信息并离开
## **cd命令**
> Linux cd 命令可以说是Linux中最基本的命令语句，其他的命令语句要进行操作，都是建立在使用 cd 命令上的。

1. 命令格式：
	> cd [目录名]

2. 命令功能：
	> 切换当前目录至dirName

## **pwd命令**
> Linux中用 pwd 命令来查看”当前工作目录“的完整路径。 简单得说，每当你在终端进行操作时，你都会有一个当前工作目录。 

> 在不太确定当前位置时，就会使用pwd来判定当前目录在文件系统内的确切位置。

1. 命令格式：

	> pwd [选项]

2. 命令功能：

	> 查看”当前工作目录“的完整路径

3. 常用参数：
	> 一般情况下不带任何参数
	> 如果目录是链接时：格式：pwd -P  显示出实际路径，而非使用连接（link）路径。 

## **mkdir命令**
> linux mkdir 命令用来创建指定的名称的目录，要求创建目录的用户在当前目录中具有写权限，并且指定的目录名不能是当前目录中已有的目录。

1. 命令格式：
	> mkdir [选项] 目录...

2. 命令功能：
	> 通过 mkdir 命令可以实现在指定位置创建以 DirName(指定的文件名)命名的文件夹或目录。要创建文件夹或目录的用户必须对所创建的文件夹的父文件夹具有写权限。并且，所创建的文件夹(目录)不能与其父目录(即父文件夹)中的文件名重名，即同一个目录下不能有同名的(区分大小写)。 

3. 命令参数：
  -m, --mode=模式，设定权限<模式> (类似 chmod)，而不是 rwxrwxrwx 减 umask
  -p, --parents  可以是一个路径名称。此时若路径中的某些目录尚不存在,加上此选项后,系统将自动建立好那些尚不存在的目录,即一次可以建立多个目录; 
  -v, --verbose  每次创建新目录都显示信息
      --help   显示此帮助信息并退出
      --version  输出版本信息并退出
## **rm命令**
> rm是常用的命令，该命令的功能为删除一个目录中的一个或多个文件或目录，它也可以将某个目录及其下的所有文件及子目录均删除。对于链接文件，只是删除了链接，原有文件均保持不变。

> rm是一个危险的命令，使用的时候要特别当心，尤其对于新手，否则整个系统就会毁在这个命令（比如在/（根目录）下执行rm * -rf）。所以，我们在执行rm之前最好先确认一下在哪个目录，到底要删除什么东西，操作时保持高度清醒的头脑。

1. 命令格式：
	> rm [选项] 文件… 

2. 命令功能：
	> 删除一个目录中的一个或多个文件或目录，如果没有使用- r选项，则rm不会删除目录。如果使用 rm 来删除文件，通常仍可以将该文件恢复原状。

3. 命令参数：
    -f, --force    忽略不存在的文件，从不给出提示。
    -i, --interactive 进行交互式删除
    -r, -R, --recursive   指示rm将参数中列出的全部目录和子目录均递归地删除。
    -v, --verbose    详细显示进行的步骤
      	--help     显示此帮助信息并退出
      	--version  输出版本信息并退出
## **mv命令**
> mv命令是move的缩写，可以用来移动文件或者将文件改名（move (rename) files），是Linux系统下常用的命令，经常用来备份文件或者目录。

1. 命令格式：
	 > mv [选项] 源文件或目录 目标文件或目录

2. 命令功能：
	> 视mv命令中第二个参数类型的不同（是目标文件还是目标目录），mv命令将文件重命名或将其移至一个新的目录中。当第二个参数类型是文件时，mv命令完成文件重命名，此时，源文件只能有一个（也可以是源目录名），它将所给的源文件或目录重命名为给定的目标文件名。当第二个参数是已存在的目录名称时，源文件或目录参数可以有多个，mv命令将各参数指定的源文件均移至目标目录中。在跨文件系统移动文件时，mv先拷贝，再将原有文件删除，而链至该文件的链接也将丢失。

3. 命令参数：
	> -b ：若需覆盖文件，则覆盖前先行备份。 
	-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；
	-i ：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
	-u ：若目标文件已经存在，且 source 比较新，才会更新(update)
		   -t  ： --target-directory=DIRECTORY move all SOURCE arguments into DIRECTORY，即指定mv的目标目录，该选项适用于移动多个源文件到一个目录的情况，此时目标目录在前，源文件在后。

## **cp命令**
> cp命令用来复制文件或者目录，是Linux系统中最常用的命令之一。一般情况下，shell会设置一个别名，在命令行下复制文件时，如果目标文件已经存在，就会询问是否覆盖，不管你是否使用-i参数。但是如果是在shell脚本中执行cp时，没有-i参数时不会询问是否覆盖。这说明命令行和shell脚本的执行方式有些不同。 

1. 命令格式：
用法：
	   cp [选项]... [-T] 源 目的
  	    或：cp [选项]... 源... 目录
       或：cp [选项]... -t 目录 源...

2. 命令功能：
	> 将源文件复制至目标文件，或将多个源文件复制至目标目录。

3. 命令参数：
-a, --archive    等于-dR --preserve=all
    --backup[=CONTROL    为每个已存在的目标文件创建备份]
-b                类似--backup 但不接受参数
   --copy-contents        在递归处理是复制特殊文件内容
-d                等于--no-dereference --preserve=links
-f, --force        如果目标文件无法打开则将其移除并重试(当 -n 选项
                    存在时则不需再选此项)
-i, --interactive        覆盖前询问(使前面的 -n 选项失效)
-H                跟随源文件中的命令行符号链接
-l, --link            链接文件而不复制
-L, --dereference   总是跟随符号链接
-n, --no-clobber   不要覆盖已存在的文件(使前面的 -i 选项失效)
-P, --no-dereference   不跟随源文件中的符号链接
-p                等于--preserve=模式,所有权,时间戳
    --preserve[=属性列表   保持指定的属性(默认：模式,所有权,时间戳)，如果
               可能保持附加属性：环境、链接、xattr 等]
-R, -r, --recursive  复制目录及目录内的所有项目

4. 命令实例：
	> cp log.log test5

## **tail命令**
> tail 命令从指定点开始将文件写到标准输出.使用tail命令的-f选项可以方便的查阅正在改变的日志文件,tail -f filename会把filename里最尾部的内容显示在屏幕上,并且不但刷新,使你看到最新的文件内容. 

1. 命令格式;
	> tail[必要参数][选择参数][文件]   

2. 命令功能：
	> 用于显示指定文件末尾内容，不指定文件时，作为输入信息进行处理。常用查看日志文件。

3. 命令参数：
-f 循环读取
-q 不显示处理信息
-v 显示详细的处理信息
-c<数目> 显示的字节数
-n<行数> 显示行数
--pid=PID 与-f合用,表示在进程ID,PID死掉之后结束. 
-q, --quiet, --silent 从不输出给出文件名的首部 
-s, --sleep-interval=S 与-f合用,表示在每次反复的间隔休眠S秒 





## **ps命令**
> Linux中的ps命令是Process Status的缩写。ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些进程，如果想要动态的显示进程信息，就可以使用top命令。

> 要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而 ps 命令就是最基本同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等。总之大部分信息都是可以通过执行该命令得到的。

> ps 为我们提供了进程的一次性的查看，它所提供的查看结果并不动态连续的；如果想对进程时间监控，应该用 top 工具。

kill 命令用于杀死进程。

linux上进程有5种状态: 
1. 运行(正在运行或在运行队列中等待) 
2. 中断(休眠中, 受阻, 在等待某个条件的形成或接受到信号) 
3. 不可中断(收到信号不唤醒和不可运行, 进程必须等待直到有中断发生) 
4. 僵死(进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放) 
5. 停止(进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行运行) 

ps工具标识进程的5种状态码: 
1. D 不可中断 uninterruptible sleep (usually IO) 
2. R 运行 runnable (on run queue) 
3. S 中断 sleeping 
4. T 停止 traced or stopped 
5. Z 僵死 a defunct (”zombie”) process 

1. 命令格式：
> ps[参数]

2. 命令功能：
> 用来显示当前进程的状态

3. 命令参数：

	a  显示所有进程

	-a 显示同一终端下的所有程序

	-A 显示所有进程

	c  显示进程的真实名称

	-N 反向选择

	-e 等于“-A”

	e  显示环境变量

	f  显示程序间的关系

	-H 显示树状结构

	r  显示当前终端的进程

	T  显示当前终端的所有程序

	u  指定用户的所有进程

	-au 显示较详细的资讯

	-aux 显示所有包含其他使用者的行程 

	-C<命令> 列出指定命令的状况

	--lines<行数> 每页显示的行数

	--width<字符数> 每页显示的字符数

	--help 显示帮助信息

	--version 显示版本显示
